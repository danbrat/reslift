<html>
<head>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

  <script>



  //array that will store our first Facebook response with the user's info
  var response1;

  //array that will store our second facebook response with the user's photos
  var response2;


  //function that will authenticate the user via Faabook, calling to the FB object
  function loginUser() {    
     FB.login(function(response) { }, {scope:'email, user_photos'});     
     }

     // FB object initialization
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1380853598846060', // App ID
      channelUrl : 'http:thecoded.com/', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.Event.subscribe('auth.statusChange', handleStatusChange);
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "https://connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

 
    //callback function of the status change from not logged in to logged in
   function handleStatusChange(response) {
     document.body.className = response.authResponse ? 'connected' : 'not_connected';

     if (response.authResponse) {
      console.log(response);
      response1= response;
      updateUserInfo(response);
      

     }
   }


   

   function updateUserInfo(response) {
     FB.api('/me', function(response) {
      response1 = response;
      $('#email').html(response1['email']);

     
      //here we will use user data to populate into different areas of our website


     });

      FB.api('/me/photos', function(response) {
      response2= response;

      $('#photos').html("<img src='"+response2['data'][0]['images'][0]['source'] + "''>");
      //here we will create user user photo information and do things with it...

      for(i in response2['data'][0]['images']){

        //do something with each image

        //example:
        //$('#photos').append("<img src='"+response2['data'][0]['images'][0]['source'] + "''>");
        console.log("photos"+response2['data'][0]['images'][i]['source'])
      }
      

     });

   }
    $(document).ready(function() {
          
          $("#loadSong").get(0).play();
         $("#title").slideDown(4000); 
         $("#welcome").fadeOut( 8000, function(){ 
             $(".log").text('Fade In Transition Complete');
             $("#photo").mouseenter(function(){
                $("#photo").fadeTo('slow' , .5)

             });
             $("#photo").mouseleave(function(){
                $("#photo").fadeTo('slow' , 1)

             });
          //$("#photo").animate({"left":"100px"}, "slow");
          });
          
         
       })
     

  </script>

  

  <style>
   
   #photos {

    background-repeat: no-repeat;
    
    margin: auto;
    position: relative;
    top: 140px;
    left: 150px;


   }

    #title {

      font-size: 80px;
      color: limegreen;
      border: 4px;
      
      
      display: none;


    }

    #welcome {

        font-size: 50px;
        color: limegreen;
        

    }

    #photo {

      height: 400px;
      width: 300px;


    }

    body {

      background-image: url('image/background.jpg');

    }
    

  </style>


  </head>

  <body>


  <audio id="loadSong" src="audio/Twin Peaks Theme ( Instrumental) 1990.mp3" loop="loop"></audio>


  <div id="login">
  <img src="fb.png" style="width:300" id="cFb" onClick="loginUser();"><center><font size=1>
 
 </div>

<div id="title">Twin Peaks Yearbook</div>
<div id="welcome">Find your old classmates!</div>
<br><br><br>
<div id="laura"><img id="photo" src="image/lauraPalmer.jpg"></div>

<br>
<div id="photos"></div>
<div id="email"></div>

<div id="name"></div>

<div id="fb-root"></div>
</body>
</html>
